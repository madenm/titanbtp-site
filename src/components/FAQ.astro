---
const faqs = [
  {
    q: 'C\'est vraiment gratuit ?',
    a: 'Oui. Plan gratuit à vie, sans carte bancaire. Créé tes devis, factures et gère tes chantiers sans payer.',
  },
  {
    q: 'Mes données sont-elles sécurisées ?',
    a: 'Totalement. Serveurs en Europe, HTTPS/TLS, tes données ne sont jamais partagées.',
  },
  {
    q: 'Ça marche sur téléphone ?',
    a: 'Oui, l\'app fonctionne sur téléphone, tablette et ordinateur. Rien à télécharger.',
  },
  {
    q: 'Comment fonctionne l\'IA ?',
    a: 'Tu prends une photo. L\'IA estime le coût, les matériaux et la durée. Tu crées le devis directement.',
  },
  {
    q: 'Tes docs sont-ils légaux ?',
    a: 'Oui. Conforme loi française : TVA, numérotation auto, pénalités, tout est bon.',
  },
];
---

<section class="py-20 lg:py-28 bg-surface-light/30">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl sm:text-4xl font-bold text-white">
        Questions fréquentes
      </h2>
    </div>

    <div class="space-y-4" id="faq-list">
      {
        faqs.map((faq, i) => (
          <div class="faq-item border border-white/5 rounded-xl overflow-hidden bg-surface-light/30">
            <button
              class="faq-toggle w-full text-left px-6 py-5 flex items-center justify-between gap-4"
              aria-expanded="false"
              data-index={i}
            >
              <span class="font-semibold text-white text-sm sm:text-base">{faq.q}</span>
              <svg class="faq-chevron w-5 h-5 text-gray-500 shrink-0 transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
            </button>
            <div class="faq-content hidden px-6 pb-5">
              <p class="text-gray-400 text-sm leading-relaxed">{faq.a}</p>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  document.querySelectorAll('.faq-toggle').forEach((btn) => {
    btn.addEventListener('click', () => {
      const item = btn.closest('.faq-item')!;
      const content = item.querySelector('.faq-content')!;
      const chevron = item.querySelector('.faq-chevron')!;
      const isOpen = btn.getAttribute('aria-expanded') === 'true';

      document.querySelectorAll('.faq-item').forEach((other) => {
        if (other !== item) {
          other.querySelector('.faq-content')!.classList.add('hidden');
          other.querySelector('.faq-toggle')!.setAttribute('aria-expanded', 'false');
          other.querySelector('.faq-chevron')!.classList.remove('rotate-180');
        }
      });

      content.classList.toggle('hidden', isOpen);
      btn.setAttribute('aria-expanded', String(!isOpen));
      chevron.classList.toggle('rotate-180', !isOpen);
    });
  });
</script>
