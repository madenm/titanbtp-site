---
const faqs = [
  {
    q: 'C\'est vraiment gratuit ?',
    a: 'Oui, le plan Gratuit est gratuit pour toujours. Pas de période d\'essai, pas de carte bancaire demandée. Tu peux créer tes devis, factures et gérer tes chantiers sans rien payer.',
  },
  {
    q: 'Est-ce que mes données sont sécurisées ?',
    a: 'Absolument. Tes données sont hébergées sur des serveurs sécurisés en Europe. Les connexions sont chiffrées (HTTPS/TLS) et tes informations ne sont jamais partagées avec des tiers.',
  },
  {
    q: 'Ça marche sur téléphone ?',
    a: 'Oui, TitanBTP est une application web responsive. Elle fonctionne parfaitement sur téléphone, tablette et ordinateur. Pas besoin de télécharger quoi que ce soit.',
  },
  {
    q: 'J\'ai besoin d\'internet pour l\'utiliser ?',
    a: 'Oui, une connexion internet est nécessaire. Mais l\'application est très légère et fonctionne même avec une connexion 4G sur le chantier.',
  },
  {
    q: 'Comment fonctionne l\'estimation par IA ?',
    a: 'Tu prends une photo du chantier et tu réponds à quelques questions. L\'IA analyse la photo et te fournit une estimation détaillée : coût des matériaux, main d\'œuvre, durée estimée et marge recommandée. Tu peux créer un devis directement depuis l\'estimation.',
  },
  {
    q: 'Est-ce que je peux importer mes tarifs existants ?',
    a: 'Oui, tu peux importer ton catalogue de tarifs au format CSV ou Excel. Tu as aussi accès au catalogue de référence Artiprix intégré directement dans l\'outil.',
  },
  {
    q: 'Mes devis et factures sont-ils conformes ?',
    a: 'Oui, les documents générés respectent les obligations légales françaises : mentions obligatoires, numérotation automatique, TVA paramétrable (0 %, 5,5 %, 10 %, 20 %), pénalités de retard, etc.',
  },
];
---

<section class="py-20 lg:py-28 bg-surface-light/30">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <span class="text-sm font-semibold text-primary-light uppercase tracking-wider">FAQ</span>
      <h2 class="mt-3 text-3xl sm:text-4xl font-bold text-white">
        Questions fréquentes
      </h2>
    </div>

    <div class="space-y-4" id="faq-list">
      {
        faqs.map((faq, i) => (
          <div class="faq-item border border-white/5 rounded-xl overflow-hidden bg-surface-light/30">
            <button
              class="faq-toggle w-full text-left px-6 py-5 flex items-center justify-between gap-4"
              aria-expanded="false"
              data-index={i}
            >
              <span class="font-semibold text-white text-sm sm:text-base">{faq.q}</span>
              <svg class="faq-chevron w-5 h-5 text-gray-500 shrink-0 transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
            </button>
            <div class="faq-content hidden px-6 pb-5">
              <p class="text-gray-400 text-sm leading-relaxed">{faq.a}</p>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  document.querySelectorAll('.faq-toggle').forEach((btn) => {
    btn.addEventListener('click', () => {
      const item = btn.closest('.faq-item')!;
      const content = item.querySelector('.faq-content')!;
      const chevron = item.querySelector('.faq-chevron')!;
      const isOpen = btn.getAttribute('aria-expanded') === 'true';

      document.querySelectorAll('.faq-item').forEach((other) => {
        if (other !== item) {
          other.querySelector('.faq-content')!.classList.add('hidden');
          other.querySelector('.faq-toggle')!.setAttribute('aria-expanded', 'false');
          other.querySelector('.faq-chevron')!.classList.remove('rotate-180');
        }
      });

      content.classList.toggle('hidden', isOpen);
      btn.setAttribute('aria-expanded', String(!isOpen));
      chevron.classList.toggle('rotate-180', !isOpen);
    });
  });
</script>
